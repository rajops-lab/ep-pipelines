buildInfo:
  github_repo_name: {{github_repo_name}}
  ecr_repo_name: {{ecr_repo_name}}
app:
  image: {{app_image}}
  tag: {{app_image_tag}}
  port: 9090
  monitoringPort: {{monitoring_port}}
  livenessProbe: /actuator/health/liveness
  readinessProbe: /actuator/health/readiness
replicaCount: 1
resources:
  requests:
    cpu: 500m
    memory: 500Mi
  limits:
    memory: 700Mi
env:
  plaintext:
    KAFKA_BROKER_SERVICE_URL: '{% for kafka_ip in kafka_ips %}{{kafka_ip}}:{{kafka_port}}{% if not loop.last %},{% endif %}{% endfor %}'
    POSTGRES_CONNECT_URL: 'jdbc:postgresql://{{rds_host}}:{{rds_port}}/{{material_master_db}}?ApplicationName=material-master'
    POSTGRES_CONNECTION_POOL: {{postgres_connection_pool}}
    POSTGRES_AUTO_DDL: {{postgres_auto_ddl}}
    API_SERVER_URL: 'https://api.{{esakha_base_domain}}/material-master'
    SAP_CONNECTOR_RFC_BASE_URL: {{sap_connector_rfc_base_url}}
    MATERIAL_KATE_TOPIC: {{material_kate_topic}}
    BOM_SERVICE_BASE_URL: {{bom_service_base_url}}
    JAVA_TOOL_OPTIONS: '{{default_java_flags}}'
    ALT_MAT_VALID_FROM_DATE: '2016-01-01'
    ALT_MAT_VALID_TO_DATE: '9999-12-31'
    USE_FIXED_BOM: 'false'
  secret:
    POSTGRES_USERNAME: {{material_master_db_username}}
    POSTGRES_PASSWORD: {{material_master_db_password}}
podmonitor:
  endpoints:
    - path: /actuator/prometheus
hostAliases:
  - ip: 172.31.32.36
    hostnames:
      - sap-ecc-private.api.tatamotors.com
service:
  port: 80
kong:
  image: {{kong_configure_image}}
  tag: {{kong_configure_image_tag}}
  services:
    - name: material-master
      authn: oidc-auth
      user_info_endpoint: {{keycloak_user_info_endpoint}}
      response_transformers:
        - "Cache-Control: no-cache"
        - "Strict-Transport-Security: max-age=31536000; includeSubDomains; preload"
        - "Content-Security-Policy: default-src 'none'"
        - "X-Content-Type-Options: nosniff"
        - "X-XSS-Protection: 1; mode=block"
        - "X-Frame-Options: SAMEORIGIN"
      service_path: /
      routes:
        paths:
          - /material-master
        strip_path: "true"
    - name: material
      authn: oidc-auth
      user_info_endpoint: {{central_keycloak_user_info_endpoint}}
      response_transformers:
        - "Cache-Control: no-cache"
        - "Strict-Transport-Security: max-age=31536000; includeSubDomains; preload"
        - "Content-Security-Policy: default-src 'none'"
        - "X-Content-Type-Options: nosniff"
        - "X-XSS-Protection: 1; mode=block"
        - "X-Frame-Options: SAMEORIGIN"
      service_path: /
      cors_allowed_origins:
        - https://planning.{{ep_base_domain}}
        - https://production-master-data.{{ep_base_domain}}
        - {{local_development_domain}}
        - https://{{srs_base_domain}}
        - https://{{sadhan_base_domain}}
      routes:
        hosts:
          - api.{{srs_base_domain}}
          - api.{{sadhan_base_domain}}
        paths:
          - /material
        strip_path: "true"
cronjobs:
  http:
    - name: sync-vc-aggregate-mapping
      schedule: '0 2 * * *'
      method: GET
      context: sync-vc-aggregate-mapping
      headers:
        Accept: "application/json"
    - name: sync-pending-vc-aggregate-mapping
      schedule: '0 * * * *'
      method: GET
      context: sync-pending-vc-aggregate-mapping
      headers:
        Accept: "application/json"
    - name: sync-vc-cost-release
      schedule: '0 * * * *'
      method: GET
      context: sync-vc-cost-release
      headers:
        Accept: "application/json"
    - name: sync-expired-share-of-business
      schedule: '0 * * * *'
      method: GET
      context: sync-expired-sob
      headers:
        Accept: "application/json"
    - name: sync-alternate-materials
      schedule: '0 */6 * * *'
      method: GET
      context: sync-alternate-materials
      headers:
        Accept: "application/json"
